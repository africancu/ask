<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.xzt.ask.mapper.AskMapper">

    <select id="queryRelativeQuestion" resultType="cn.xzt.ask.dto.QuestionDTO">
        SELECT q.question_id, q.question, t.type_id, t.`name` as typeName
        FROM `question` q
        LEFT JOIN question_type t ON q.type_id = t.type_id
        <where>
            <foreach collection="list" item="item">
                OR q.question LIKE '%${item}%'
            </foreach>
        </where>
    </select>

    <select id="queryAnswerById" resultType="cn.xzt.ask.dto.QuestionDTO">
        SELECT q.question_id, q.question, q.answer,  t.type_id, t.`name` as typeName, q.create_time
        FROM `question` q
        LEFT JOIN question_type t ON q.type_id = t.type_id
        where q.question_id = #{id}
    </select>

    <select id="list" resultType="cn.xzt.ask.dto.QuestionDTO">
        SELECT q.question_id, q.question, t.type_id, t.`name` as typeName
        FROM `question` q
        LEFT JOIN question_type t ON q.type_id = t.type_id
    </select>

</mapper>